# نظام إدارة العملاء والموردين

نظام شامل لإدارة العملاء والموردين مع إمكانيات الفواتير والتحصيل والدفع.

## المتطلبات

- Python 3.8+
- Flask
- SQLAlchemy

## التشغيل المحلي

```bash
pip install -r requirements.txt
python app.py
```

## النشر على Railway

1. ارفع المشروع إلى GitHub
2. اربط المستودع مع Railway
3. تأكد من وجود الملفات التالية:
   - `requirements.txt`
   - `Procfile`
   - `railway.json`

## متغيرات البيئة للإنتاج

```
SECRET_KEY=your-secret-key-here
DATABASE_URL=postgresql://user:password@host:port/database
PORT=5000
```

## الميزات

- إدارة العملاء والموردين
- فواتير المبيعات والمشتريات
- التحصيل والدفع
- التقارير والإحصائيات
- طباعة الفواتير والإيصالات
- تصدير البيانات (Excel/PDF)

## بيانات الدخول الافتراضية

- اسم المستخدم: `admin`
- كلمة المرور: `admin123`

## هيكل النظام

```
customer_supplier_system/
├── app.py                 # الملف الرئيسي للتطبيق
├── requirements.txt       # المكتبات المطلوبة
├── business_system.db     # قاعدة البيانات (تنشأ تلقائياً)
├── templates/             # قوالب HTML
│   ├── base.html         # القالب الأساسي
│   ├── login.html        # صفحة تسجيل الدخول
│   ├── dashboard.html    # لوحة التحكم
│   ├── customers.html    # قائمة العملاء
│   ├── suppliers.html    # قائمة الموردين
│   └── ...              # باقي القوالب
└── backups/              # مجلد النسخ الاحتياطية
```

## قاعدة البيانات

النظام يستخدم SQLite كقاعدة بيانات مع الجداول التالية:
- `User` - المستخدمين
- `Customer` - العملاء
- `Supplier` - الموردين
- `SalesInvoice` - فواتير المبيعات
- `PurchaseInvoice` - فواتير المشتريات
- `Collection` - التحصيلات
- `Payment` - المدفوعات

## المميزات الرئيسية

### إدارة العملاء
- إضافة وتعديل وعرض بيانات العملاء
- تتبع أرصدة العملاء تلقائياً
- فواتير المبيعات مع ترقيم تلقائي
- نظام التحصيلات من العملاء
- كشف حساب مفصل لكل عميل

### إدارة الموردين
- إضافة وتعديل وعرض بيانات الموردين
- تتبع أرصدة الموردين تلقائياً
- فواتير المشتريات مع ترقيم تلقائي
- نظام المدفوعات للموردين
- كشف حساب مفصل لكل مورد

### نظام التقارير
- تقارير شاملة لجميع العملاء
- تقارير شاملة لجميع الموردين
- تقارير مفصلة لكل عميل أو مورد على حدة
- إمكانية تصدير التقارير بصيغة PDF و Excel

### نظام الأمان
- نظام تسجيل دخول آمن
- إدارة المستخدمين
- تشفير كلمات المرور

### النسخ الاحتياطي
- إنشاء نسخ احتياطية من قاعدة البيانات
- استعادة النسخ الاحتياطية
- حماية البيانات من الفقدان

## متطلبات التشغيل

- Python 3.8 أو أحدث
- المكتبات المطلوبة (موجودة في requirements.txt)

## طريقة التثبيت والتشغيل

1. **تثبيت المكتبات المطلوبة:**
   ```bash
   pip install -r requirements.txt
   ```

2. **تشغيل النظام:**
   ```bash
   python app.py
   ```

3. **فتح النظام في المتصفح:**
   ```
   http://localhost:5000
   ```

4. **بيانات الدخول الافتراضية:**
   - اسم المستخدم: `admin`
   - كلمة المرور: `admin123`

## هيكل النظام

```
customer_supplier_system/
├── app.py                 # الملف الرئيسي للتطبيق
├── requirements.txt       # المكتبات المطلوبة
├── business_system.db     # قاعدة البيانات (تنشأ تلقائياً)
├── templates/             # قوالب HTML
│   ├── base.html         # القالب الأساسي
│   ├── login.html        # صفحة تسجيل الدخول
│   ├── dashboard.html    # لوحة التحكم
│   ├── customers.html    # قائمة العملاء
│   ├── suppliers.html    # قائمة الموردين
│   └── ...              # باقي القوالب
└── backups/              # مجلد النسخ الاحتياطية
```

## قاعدة البيانات

النظام يستخدم SQLite كقاعدة بيانات مع الجداول التالية:
- `User` - المستخدمين
- `Customer` - العملاء
- `Supplier` - الموردين
- `SalesInvoice` - فواتير المبيعات
- `PurchaseInvoice` - فواتير المشتريات
- `Collection` - التحصيلات
- `Payment` - المدفوعات

## الاستخدام

### إضافة عميل جديد
1. اذهب إلى "العملاء" من القائمة الجانبية
2. اضغط على "إضافة عميل جديد"
3. املأ البيانات المطلوبة
4. اضغط "حفظ العميل"

### إنشاء فاتورة مبيعات
1. اذهب إلى "المبيعات" > "فواتير المبيعات"
2. اضغط على "إضافة فاتورة جديدة"
3. اختر العميل والمبلغ والوصف
4. سيتم تحديث رصيد العميل تلقائياً

### تحصيل من عميل
1. اذهب إلى "المبيعات" > "التحصيلات"
2. اضغط على "إضافة تحصيل جديد"
3. اختر العميل والمبلغ المحصل
4. سيتم خصم المبلغ من رصيد العميل تلقائياً

### عرض التقارير
1. اذهب إلى "التقارير"
2. اختر نوع التقرير المطلوب
3. يمكن تصدير التقرير بصيغة PDF أو Excel

### النسخ الاحتياطي
1. اذهب إلى "النسخ الاحتياطي"
2. اضغط على "إنشاء نسخة احتياطية" لتحميل نسخة من قاعدة البيانات
3. لاستعادة نسخة احتياطية، اضغط على "استعادة نسخة احتياطية" واختر الملف

## الدعم الفني

للمساعدة أو الإبلاغ عن مشاكل، يرجى التواصل مع فريق التطوير.

## الترخيص

هذا النظام مطور خصيصاً لإدارة العملاء والموردين ويمكن تخصيصه حسب احتياجات العمل.
